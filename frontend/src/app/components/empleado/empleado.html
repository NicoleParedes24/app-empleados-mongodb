<div class="container mt-4">
  <div class="row">

    <!-- ================= FORMULARIO ================= -->
    <div class="col-md-4">

      <h3>
        {{ editIndex === null ? 'Nuevo Empleado' : 'Editar Empleado' }}
      </h3>

      <form
        #empleadoForm="ngForm"
        (ngSubmit)="editIndex === null 
          ? addEmpleado(empleadoForm) 
          : updateEmpleado(empleadoForm)">

        <input
          type="text"
          name="nombre"
          placeholder="Nombre"
          [(ngModel)]="empleadoService.selectedEmpleado.nombre"
          required
          class="form-control mb-2"
        />

        <input
          type="text"
          name="cargo"
          placeholder="Cargo"
          [(ngModel)]="empleadoService.selectedEmpleado.cargo"
          class="form-control mb-2"
        />

        <input
          type="text"
          name="departamento"
          placeholder="Departamento"
          [(ngModel)]="empleadoService.selectedEmpleado.departamento"
          class="form-control mb-2"
        />

        <input
          type="number"
          name="sueldo"
          placeholder="Sueldo"
          [(ngModel)]="empleadoService.selectedEmpleado.sueldo"
          class="form-control mb-3"
        />

        <!-- BOTÓN PRINCIPAL -->
        <button class="btn btn-primary w-100 mb-2">
          {{ editIndex === null ? 'Guardar' : 'Actualizar' }}
        </button>

        <!-- BOTÓN CANCELAR -->
        <button
          *ngIf="editIndex !== null"
          type="button"
          class="btn btn-outline-secondary w-100"
          (click)="cancelarEdicion(empleadoForm)">
          Cancelar
        </button>

      </form>
    </div>

    <!-- ================= TABLA ================= -->
    <div class="col-md-8">

      <!-- TÍTULO + BOTÓN -->
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="m-0">Lista de Empleados</h3>

        <button
          class="btn btn-outline-primary btn-sm"
          (click)="cargarEmpleados()"
          [disabled]="cargando">
          {{ cargando ? 'Cargando...' : 'Cargar datos' }}
        </button>
      </div>

      <!-- ESTADO CARGANDO -->
      <div *ngIf="cargando" class="text-center text-muted py-4">
        Cargando empleados...
      </div>

      <!-- ESTADO SIN DATOS -->
      <div
        *ngIf="!cargando && empleadoService.empleados.length === 0"
        class="text-center text-muted py-4">
        No hay empleados registrados
      </div>

      <!-- TABLA -->
      <table
        class="table table-striped"
        *ngIf="!cargando && empleadoService.empleados.length > 0">

        <thead>
          <tr>
            <th>Nombre</th>
            <th>Cargo</th>
            <th>Departamento</th>
            <th>Sueldo</th>
            <th class="text-end">Acciones</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let emp of empleadoService.empleados; let i = index">

            <td>{{ emp.nombre }}</td>
            <td>{{ emp.cargo }}</td>
            <td>{{ emp.departamento }}</td>
            <td>{{ emp.sueldo }}</td>

            <td class="text-end">
              <div class="btn-group btn-group-sm">

                <button
                  class="btn btn-outline-primary"
                  (click)="verEmpleado(i)">
                  Ver
                </button>

                <button
                  class="btn btn-outline-secondary"
                  (click)="editEmpleado(emp, i)">
                  Editar
                </button>

                <button
                  class="btn btn-outline-danger"
                  (click)="deleteEmpleado(i)">
                  Eliminar
                </button>

              </div>
            </td>

          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>
